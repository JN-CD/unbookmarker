console.log("Running Unbookmarker...");const style=document.createElement("style");style.textContent="\n  .scaled-down {\n    transform: scale(0.95);\n    transition: transform 0.08s ease;\n  }\n",document.head.appendChild(style);const keyframesStyle=document.createElement("style");keyframesStyle.textContent="\n  @keyframes shiver {\n    0%, 100% { transform: translate(0, 0) rotate(0deg); }\n    10% { transform: translate(-1px, -1px) rotate(-1deg); }\n    20% { transform: translate(1px, -1px) rotate(1deg); }\n    30% { transform: translate(-1px, 1px) rotate(0deg); }\n    40% { transform: translate(1px, 1px) rotate(-1deg); }\n    50% { transform: translate(-1px, -1px) rotate(1deg); }\n    60% { transform: translate(1px, -1px) rotate(0deg); }\n    70% { transform: translate(-1px, 1px) rotate(-1deg); }\n    80% { transform: translate(1px, 1px) rotate(1deg); }\n    90% { transform: translate(-1px, -1px) rotate(0deg); }\n  }\n",document.head.appendChild(keyframesStyle);let backgroundColor="#FFFFFF",buttonBackgroundColor="rgb(100, 180, 220)",overlayColor="",isFirstBookmarkDisplayed=!1,startButton,startText,startImage,additionalText,counter=-1;const max_session=11;let unbookmarkCounter=0,previousTweetUrl=null,currentTweetUrl=null,colorSchemeDetected=0;const rightSound=new Audio(chrome.runtime.getURL("sound/sound-right.mp3")),leftSound=new Audio(chrome.runtime.getURL("sound/sound-left.mp3")),successSound=new Audio(chrome.runtime.getURL("sound/arcade-win-sound.mp3"));function detectColorScheme(){const htmlStyle=window.getComputedStyle(document.documentElement),colorScheme=htmlStyle.getPropertyValue("color-scheme");backgroundColor=colorScheme&&colorScheme.includes("dark")?"#000000":"#FFFFFF",overlayColor=colorScheme&&colorScheme.includes("dark")?"#161D26":"#E8F4FF",colorSchemeDetected=1}function detectButtonScheme(){const newTweetButton=document.querySelector('[data-testid="SideNav_NewTweet_Button"]');if(newTweetButton){const buttonStyle=window.getComputedStyle(newTweetButton);buttonBackgroundColor=buttonStyle.backgroundColor;const notificationArea=document.getElementById("notification-area");notificationArea&&(notificationArea.style.backgroundColor=buttonBackgroundColor)}}function updateProgressBar(){const progressBarContainer=document.getElementById("progress-bar-container"),fillBarDiv=document.getElementById("fill-bar-div");if(progressBarContainer&&fillBarDiv){const shouldDisplay=counter>=0&&counter<=11;shouldDisplay!==progressBarContainer.style.display!=="none"&&(progressBarContainer.style.display=shouldDisplay?"block":"none");const fillWidth=counter/11*600;fillBarDiv.style.width!==`${fillWidth}px`&&(fillBarDiv.style.width=`${fillWidth}px`)}}function incrementCounterAndUpdateProgressBar(){counter>=11?counter=0:counter++,updateProgressBar();const returnButton=document.getElementById("returnButton");returnButton&&(returnButton.style.display=counter>=1?"block":"none")}rightSound.volume=.1,leftSound.volume=.1,successSound.volume=.1;let overlayActive=0,displayedTweetText;function createOverlay(){if(!document.getElementById("extension-overlay")){overlayActive=1,disableScrolling();const overlay=document.createElement("div");overlay.id="extension-overlay",overlay.style.position="fixed",overlay.style.top="0",overlay.style.left="0",overlay.style.width="100%",overlay.style.height="100%",overlay.style.backgroundColor=overlayColor,overlay.style.zIndex="10000",overlay.style.display="flex",overlay.style.justifyContent="center",overlay.style.alignItems="center",overlay.style.color="white";const progressBarContainer=document.createElement("div");progressBarContainer.id="progress-bar-container",progressBarContainer.style.position="absolute",progressBarContainer.style.top="30px",progressBarContainer.style.left="50%",progressBarContainer.style.transform="translateX(-50%)",progressBarContainer.style.width="611px",progressBarContainer.style.height="28px",progressBarContainer.style.display="none",progressBarContainer.style.overflow="hidden";const progressBarImage=document.createElement("img");progressBarImage.id="progress-bar-image",progressBarImage.src=chrome.runtime.getURL("images/empty-bar.svg"),progressBarImage.style.width="100%",progressBarImage.style.height="100%",progressBarContainer.appendChild(progressBarImage);const fillBarDiv=document.createElement("div");fillBarDiv.id="fill-bar-div",fillBarDiv.style.width="0px",fillBarDiv.style.height="18px",fillBarDiv.style.position="absolute",fillBarDiv.style.left="5px",fillBarDiv.style.top="5px",fillBarDiv.style.backgroundImage=`url('${chrome.runtime.getURL("images/fill-bar.svg")}')`,fillBarDiv.style.backgroundSize="cover",fillBarDiv.style.backgroundRepeat="no-repeat",fillBarDiv.style.transition="width 0.5s ease-in-out",progressBarContainer.appendChild(fillBarDiv),overlay.appendChild(progressBarContainer);const bookmarkContainer=document.createElement("div");bookmarkContainer.id="bookmark-container",bookmarkContainer.style.maxWidth="80%",bookmarkContainer.style.maxHeight="80%",bookmarkContainer.style.overflowY="scroll",bookmarkContainer.style.display="flex",bookmarkContainer.style.flexDirection="column",bookmarkContainer.style.justifyContent="flex-start",bookmarkContainer.style.alignItems="center";const startImage=document.createElement("img");startImage.id="startImage",startImage.src=chrome.runtime.getURL("images/unbookmarker.png"),startImage.style.position="absolute",startImage.style.top="10%",startImage.style.left="50%",startImage.style.transform="translateX(-50%)",startImage.style.width="800px",overlay.appendChild(startImage);const additionalText=document.createElement("div");additionalText.id="additionalText",additionalText.textContent="Revisit and declutter your bookmarks",additionalText.style.position="absolute",additionalText.style.top="calc(10% + 80px + 20px)",additionalText.style.left="50%",additionalText.style.transform="translateX(-50%)",additionalText.style.color="#808080",additionalText.style.fontFamily="TwitterChirp, Arial, sans-serif",additionalText.style.fontSize="20px",additionalText.style.fontWeight="bold",overlay.appendChild(additionalText);const startText=document.createElement("div");startText.id="startText",startText.textContent="Press â†’ to start",startText.style.color="#808080",startText.style.fontFamily="TwitterChirp, Arial, sans-serif",startText.style.fontSize="20px",startText.style.fontWeight="bold",startText.style.marginTop="30px";const startButton=document.createElement("img");startButton.src=chrome.runtime.getURL("images/bookmark-button.png"),startButton.style.cursor="pointer",startButton.style.marginTop="20px",startButton.alt="Start",bookmarkContainer.appendChild(startButton),bookmarkContainer.appendChild(startText),startButton.id="startButton",startButton.addEventListener("click",(function(){rightSound.play();const additionalTextElement=document.getElementById("additionalText");additionalTextElement&&"none"!==additionalTextElement.style.display?(scaleButtonEffect(startButton),setTimeout(()=>{startButton.style.display="none",startText.style.display="none",additionalText.style.display="none",startImage.style.display="none",leftArrowContainer.style.display="block",rightArrowContainer.style.display="block",fetchAndDisplayRandomBookmark()},250)):(scaleButtonEffect(startButton),startButton.style.display="none",startText.style.display="none",additionalText.style.display="none",startImage.style.display="none",leftArrowContainer.style.display="block",rightArrowContainer.style.display="block",fetchAndDisplayRandomBookmark())}));const notificationArea=document.createElement("div");notificationArea.id="notification-area",notificationArea.style.display="none",notificationArea.style.position="absolute",notificationArea.style.bottom="20px",notificationArea.style.left="50%",notificationArea.style.transform="translateX(-50%)",notificationArea.style.backgroundColor=buttonBackgroundColor,notificationArea.style.color="white",notificationArea.style.padding="10px",notificationArea.style.borderRadius="5px",notificationArea.style.height="20px",notificationArea.style.fontFamily="TwitterChirp, Arial, sans-serif",notificationArea.style.display="flex",notificationArea.style.alignItems="center",notificationArea.style.fontSize="16px",notificationArea.style.fontWeight="620",notificationArea.style.display="none",notificationArea.textContent="Unbookmarked";const escButton=document.createElement("img");escButton.src=chrome.runtime.getURL("images/esc-key.png"),escButton.style.position="absolute",escButton.style.top="20px",escButton.style.left="20px",escButton.style.cursor="pointer",escButton.style.width="50px",escButton.style.height="50px",escButton.alt="Escape",escButton.id="escButton";const returnButton=document.createElement("img");returnButton.src=chrome.runtime.getURL("images/back-key.png"),returnButton.style.position="absolute",returnButton.style.top="20px",returnButton.style.right="20px",returnButton.style.cursor="pointer",returnButton.style.height="50px",returnButton.alt="Back",returnButton.style.display="none",returnButton.id="returnButton",overlay.appendChild(returnButton);const leftArrowContainer=document.createElement("div");leftArrowContainer.style.display="none",leftArrowContainer.style.position="fixed",leftArrowContainer.style.top="50%",leftArrowContainer.style.left="150px",leftArrowContainer.style.transform="translateY(-50%)",leftArrowContainer.style.textAlign="center",leftArrowContainer.style.width="100px";const leftArrowButton=document.createElement("img");leftArrowButton.src=chrome.runtime.getURL("images/arrowleft.png"),leftArrowButton.style.cursor="pointer",leftArrowButton.style.display="block",leftArrowButton.style.margin="0 auto",leftArrowButton.alt="Remove";const leftArrowText=document.createElement("div");leftArrowText.textContent="remove",leftArrowText.style.color="#808080",leftArrowText.style.fontFamily="TwitterChirp, Arial, sans-serif",leftArrowText.style.fontSize="20px",leftArrowText.style.fontWeight="normal",leftArrowText.style.marginTop="5px",leftArrowContainer.appendChild(leftArrowButton),leftArrowContainer.appendChild(leftArrowText),overlay.appendChild(leftArrowContainer),leftArrowContainer.id="leftArrowContainer",leftArrowButton.id="leftArrowButton";const rightArrowContainer=document.createElement("div");rightArrowContainer.style.display="none",rightArrowContainer.style.position="fixed",rightArrowContainer.style.top="50%",rightArrowContainer.style.right="150px",rightArrowContainer.style.transform="translateY(-50%)",rightArrowContainer.style.textAlign="center",rightArrowContainer.style.width="100px";const rightArrowButton=document.createElement("img");rightArrowButton.src=chrome.runtime.getURL("images/arrowright.png"),rightArrowButton.style.cursor="pointer",rightArrowButton.style.display="block",rightArrowButton.style.margin="0 auto",rightArrowButton.alt="Keep";const rightArrowText=document.createElement("div");rightArrowText.textContent="keep",rightArrowText.style.color="#808080",rightArrowText.style.fontFamily="TwitterChirp, Arial, sans-serif",rightArrowText.style.fontSize="20px",rightArrowText.style.fontWeight="normal",rightArrowText.style.marginTop="5px",rightArrowContainer.appendChild(rightArrowButton),rightArrowContainer.appendChild(rightArrowText),overlay.appendChild(rightArrowContainer),rightArrowContainer.id="rightArrowContainer",rightArrowButton.id="rightArrowButton";const focusElement=document.createElement("div");focusElement.id="invisibleFocusElement",focusElement.style.position="absolute",focusElement.style.right="0",focusElement.style.bottom="0",focusElement.style.width="1px",focusElement.style.height="1px",focusElement.style.opacity="0",focusElement.tabIndex=-1,overlay.appendChild(bookmarkContainer),overlay.appendChild(notificationArea),overlay.appendChild(escButton),overlay.appendChild(focusElement),overlay.leftArrowButton=leftArrowButton,overlay.rightArrowButton=rightArrowButton,document.body.appendChild(overlay),overlay.addEventListener("click",resetFocus),bookmarkContainer.addEventListener("click",resetFocus),escButton.addEventListener("click",(function(){scaleButtonEffect(escButton),counter=-1,setTimeout(()=>{escapeOverlay()},100)})),leftArrowButton.addEventListener("click",(function(){leftSound.play(),scaleButtonEffect(leftArrowButton),clickRemoveBookmarkButtonAndDisplayNewBookmark()})),rightArrowButton.addEventListener("click",(function(){rightSound.play(),scaleButtonEffect(rightArrowButton),fetchAndDisplayRandomBookmark()})),returnButton.addEventListener("click",(function(){scaleButtonEffect(returnButton),previousTweetUrl&&setTimeout(()=>{window.open(previousTweetUrl,"_blank")},100)}))}}function resetFocus(){document.body.focus()}function simulateScroll(callback){let lastScrollTop=window.scrollY;function checkScroll(){window.scrollY===lastScrollTop?callback():(lastScrollTop=window.scrollY,setTimeout(checkScroll,100))}window.scrollTo(0,document.body.scrollHeight),setTimeout(checkScroll,100)}function observeTweetsContainer(callback){const tweetsContainer=document.querySelector('section[aria-labelledby^="accessible-list-"]')||document.body,config={childList:!0,subtree:!0},observer=new MutationObserver((mutationsList,observer)=>{for(let mutation of mutationsList)if("childList"===mutation.type&&mutation.addedNodes.length>0){callback(),observer.disconnect();break}});observer.observe(tweetsContainer,config)}function getRandomTweet(){const tweets=document.querySelectorAll('[data-testid="tweet"]');if(0===tweets.length)return null;const upperLimit=Math.min(tweets.length,3),randomIndex=Math.floor(Math.random()*upperLimit);return tweets[randomIndex]}let isActionInProgress=!1;function fetchAndDisplayRandomBookmark(){if(10==counter)incrementCounterAndUpdateProgressBar(),previousTweetUrl=currentTweetUrl,successSound.play(),displayStartAgainPage();else{const startButton=document.querySelector("#bookmark-container img"),startText=document.querySelector("#bookmark-container div"),startImageElement=document.getElementById("startImage"),additionalTextElement=document.getElementById("additionalText");if(startButton&&startText&&startImageElement&&additionalTextElement&&(startButton.style.display="none",startText.style.display="none",startImageElement.style.display="none",additionalTextElement.style.display="none"),simulateScroll(()=>{setTimeout(()=>{const randomTweet=getRandomTweet();if(!randomTweet)return;previousTweetUrl=currentTweetUrl;const tweetTextElement=randomTweet.querySelector('[data-testid="tweetText"] span:first-child');if(tweetTextElement){displayedTweetText=tweetTextElement.textContent.trim();const tweetGrandParentClone=randomTweet.parentElement.parentElement.cloneNode(!0);tweetGrandParentClone.style.maxWidth="600px",tweetGrandParentClone.style.borderRadius="15px",tweetGrandParentClone.style.padding="20px",tweetGrandParentClone.style.backgroundColor=backgroundColor;const bookmarkContainer=document.getElementById("bookmark-container");bookmarkContainer.innerHTML="";const anchors=tweetGrandParentClone.getElementsByTagName("a");for(let anchor of anchors)anchor.removeAttribute("href"),anchor.style.pointerEvents="none";incrementCounterAndUpdateProgressBar(),bookmarkContainer.appendChild(tweetGrandParentClone),getTweetUrl(displayedTweetText,tweetUrl=>{tweetUrl?(currentTweetUrl=tweetUrl,tweetGrandParentClone.addEventListener("click",(function(){chrome.runtime.sendMessage({action:"openTab",url:tweetUrl})}))):currentTweetUrl=""})}else simulateScroll(()=>{setTimeout(()=>{const randomTweet=getRandomTweet(),tweetTextElement=randomTweet.querySelector('[data-testid="tweetText"] span:first-child');if(tweetTextElement){displayedTweetText=tweetTextElement.textContent.trim();const tweetGrandParentClone=randomTweet.parentElement.parentElement.cloneNode(!0);tweetGrandParentClone.style.maxWidth="600px",tweetGrandParentClone.style.borderRadius="15px",tweetGrandParentClone.style.padding="20px",tweetGrandParentClone.style.backgroundColor=backgroundColor;const bookmarkContainer=document.getElementById("bookmark-container");bookmarkContainer.innerHTML="";const anchors=tweetGrandParentClone.getElementsByTagName("a");for(let anchor of anchors)anchor.removeAttribute("href"),anchor.style.pointerEvents="none";incrementCounterAndUpdateProgressBar(),bookmarkContainer.appendChild(tweetGrandParentClone),getTweetUrl(displayedTweetText,tweetUrl=>{currentTweetUrl=tweetUrl,tweetGrandParentClone.addEventListener("click",(function(){chrome.runtime.sendMessage({action:"openTab",url:tweetUrl})}))})}},350)})},450)}),!isFirstBookmarkDisplayed){const overlay=document.getElementById("extension-overlay");overlay&&overlay.leftArrowButton&&overlay.rightArrowButton&&(overlay.leftArrowButton.style.display="block",overlay.rightArrowButton.style.display="block"),isFirstBookmarkDisplayed=!0}}}function displayStartAgainPage(){const bookmarkContainer=document.getElementById("bookmark-container");bookmarkContainer.innerHTML="";const messageDiv=document.createElement("div");messageDiv.style.textAlign="center",messageDiv.style.color="#808080",messageDiv.style.fontFamily="TwitterChirp, Arial, sans-serif",messageDiv.style.padding="20px",messageDiv.style.fontSize="20px",messageDiv.style.fontWeight="bold",messageDiv.style.marginBottom="20px",messageDiv.id="messageDiv",messageDiv.style.animation="shiver 0.6s ease-in-out";const countSpan=document.createElement("span");let messageText;countSpan.style.color=buttonBackgroundColor,countSpan.textContent=unbookmarkCounter,messageText=0===unbookmarkCounter?`You unbookmarked ${countSpan.outerHTML} tweet.`:1===unbookmarkCounter?`Congrats, you unbookmarked ${countSpan.outerHTML} tweet.`:`Congrats, you unbookmarked ${countSpan.outerHTML} tweets!`,messageDiv.innerHTML=messageText,bookmarkContainer.appendChild(messageDiv);const continueButton=document.createElement("img");continueButton.src=chrome.runtime.getURL("images/arrowright.png"),continueButton.style.cursor="pointer",continueButton.style.marginTop="20px",continueButton.alt="Continue",continueButton.id="continueButton";const continueText=document.createElement("div");continueText.textContent="Press â†’ to start again",continueText.style.color="#808080",continueText.style.fontFamily="TwitterChirp, Arial, sans-serif",continueText.style.fontSize="20px",continueText.style.fontWeight="bold",continueText.style.marginTop="30px",continueText.id="continueText",bookmarkContainer.appendChild(continueButton),bookmarkContainer.appendChild(continueText);const leftArrowContainer=document.getElementById("leftArrowContainer"),rightArrowContainer=document.getElementById("rightArrowContainer");leftArrowContainer&&rightArrowContainer&&(leftArrowContainer.style.display="none",rightArrowContainer.style.display="none"),unbookmarkCounter=0,continueButton.addEventListener("click",(function(){rightSound.play(),scaleButtonEffect(continueButton),continueText&&(continueText.style.display="none"),messageDiv&&(messageDiv.style.display="none"),setTimeout(()=>{transitionToNextPage()},250)}))}function getTweetUrl(tweetText,callback){const tweets=Array.from(document.querySelectorAll('[data-testid="tweet"]')),targetTweet=tweets.find(tweet=>tweet.textContent.includes(tweetText));if(!targetTweet)return;const caretButton=targetTweet.querySelector('[data-testid="caret"]');caretButton&&(setTimeout(()=>{caretButton.click()},200),setTimeout(()=>{const engagementsLink=document.querySelector('[data-testid="tweetEngagements"]');if(engagementsLink&&engagementsLink.href){const tweetUrl=engagementsLink.href.replace(/\/quotes?$/,""),focusElement=document.getElementById("invisibleFocusElement");focusElement&&focusElement.focus(),callback(tweetUrl)}},1050))}function showNotification(message){const notificationArea=document.getElementById("notification-area");notificationArea.textContent=message,notificationArea.style.display="block",setTimeout(()=>{notificationArea.style.display="none"},1500)}function clickRemoveBookmarkButtonAndDisplayNewBookmark(){const underlayTweets=document.querySelectorAll('[data-testid="tweet"]');for(const tweet of underlayTweets){const tweetTextElement=tweet.querySelector('[data-testid="tweetText"] span:first-child');if(tweetTextElement&&tweetTextElement.textContent.trim()===displayedTweetText){const removeBookmarkButton=tweet.querySelector('[data-testid="removeBookmark"]');if(removeBookmarkButton)return removeBookmarkButton.click(),unbookmarkCounter++,showNotification("unbookmarked."),void setTimeout(()=>{fetchAndDisplayRandomBookmark()},120)}}}function escapeOverlay(){const overlay=document.getElementById("extension-overlay");enableScrolling(),overlay&&(overlay.remove(),overlayActive=0);const pillLabel=document.querySelector('[data-testid="pillLabel"]');pillLabel&&pillLabel.click()}let exploreText="Explore",exploreColor="",exploreFont="",debounceTimer;function changeButtonText(){const exploreLink=document.querySelector('[data-testid="AppTabBar_Explore_Link"]');if(exploreLink){const textSpan=exploreLink.querySelector("span");if(textSpan){exploreText=textSpan.textContent,exploreColor=textSpan.style.color,exploreFont=textSpan.style.fontWeight,textSpan.textContent="Unbookmarker",textSpan.style.color=buttonBackgroundColor,textSpan.style.fontWeight="bold";const svgPath=exploreLink.querySelector("svg path");svgPath&&svgPath.setAttribute("fill",buttonBackgroundColor),exploreLink.style.animation="shiver 1s ease-in-out"}}}function revertButtonText(){const exploreLink=document.querySelector('[data-testid="AppTabBar_Explore_Link"]');if(exploreLink){const textSpan=exploreLink.querySelector("span");if(textSpan){textSpan.textContent=exploreText,textSpan.style.color=exploreColor,textSpan.style.fontWeight=exploreFont,exploreLink.style.animation="";const svgPath=exploreLink.querySelector("svg path");svgPath&&svgPath.setAttribute("fill",exploreColor)}}}function handleExploreClick(event){event.preventDefault(),createOverlay()}const debounce=(func,delay)=>{clearTimeout(debounceTimer),debounceTimer=setTimeout(func,delay)};let stateBookmarksPage=0;const callback=function(mutationsList,observer){debounce(()=>{let link=document.head.querySelector('link[href="https://twitter.com/i/bookmarks"]'),linkSettings=document.head.querySelector('link[href="https://twitter.com/settings/display"]');if(link){const exploreLink=document.querySelector('[data-testid="AppTabBar_Explore_Link"]');exploreLink&&0===stateBookmarksPage&&(1===colorSchemeDetected?(exploreLink.addEventListener("click",handleExploreClick),changeButtonText(),stateBookmarksPage=1):0===colorSchemeDetected&&(setTimeout(detectColorScheme,200),setTimeout(detectButtonScheme,400),setTimeout(()=>{exploreLink.addEventListener("click",handleExploreClick),changeButtonText(),stateBookmarksPage=1},1e3)))}else if(linkSettings)colorSchemeDetected=0;else{const exploreLink=document.querySelector('[data-testid="AppTabBar_Explore_Link"]');exploreLink&&1===stateBookmarksPage&&(exploreLink.removeEventListener("click",handleExploreClick),revertButtonText(),stateBookmarksPage=0)}},1e3)},observer=new MutationObserver(callback);setTimeout(()=>{observer.observe(document.head,{childList:!0,subtree:!0})},2e3),document.addEventListener("keydown",event=>{if(1===overlayActive)if("ArrowRight"===event.key){const additionalTextElement=document.getElementById("additionalText");if(additionalTextElement&&"none"!==additionalTextElement.style.display){rightSound.play();const startButton=document.getElementById("startButton");scaleButtonEffect(startButton),setTimeout(()=>{transitionToNextPage()},250)}else{rightSound.play();const rightArrowButton=document.getElementById("rightArrowButton"),continueButton=document.getElementById("continueButton");if(continueButton){scaleButtonEffect(continueButton);const messageDiv=document.getElementById("messageDiv");messageDiv&&(messageDiv.style.display="none");const continueText=document.getElementById("continueText");continueText&&(continueText.style.display="none"),setTimeout(()=>{transitionToNextPage()},250)}else rightArrowButton&&(scaleButtonEffect(rightArrowButton),transitionToNextPage())}}else if("ArrowLeft"===event.key){leftSound.play();const leftArrowButton=document.getElementById("leftArrowButton");scaleButtonEffect(leftArrowButton),clickRemoveBookmarkButtonAndDisplayNewBookmark()}else if("Escape"===event.key){const escButton=document.getElementById("escButton");scaleButtonEffect(escButton),counter=-1,setTimeout(()=>{escapeOverlay()},100)}else if("Backspace"==event.key&&counter>=1)event.preventDefault(),scaleButtonEffect(returnButton),previousTweetUrl&&setTimeout(()=>{window.open(previousTweetUrl,"_blank")},100);else if(" "==event.key){const additionalTextElement=document.getElementById("additionalText");if(additionalTextElement&&"none"!==additionalTextElement.style.display){rightSound.play();const startButton=document.getElementById("startButton");scaleButtonEffect(startButton),setTimeout(()=>{transitionToNextPage()},250)}}});var preventWheelScroll=function(event){event.isTrusted&&event.preventDefault()},preventTouchMoveScroll=function(event){event.isTrusted&&event.preventDefault()},preventArrowKeyScroll=function(event){!event.isTrusted||38!==event.keyCode&&40!==event.keyCode||event.preventDefault()};function disableScrolling(){document.addEventListener("wheel",preventWheelScroll,{passive:!1}),document.addEventListener("touchmove",preventTouchMoveScroll,{passive:!1}),document.addEventListener("keydown",preventArrowKeyScroll,{passive:!1})}function enableScrolling(){document.removeEventListener("wheel",preventWheelScroll,{passive:!1}),document.removeEventListener("touchmove",preventTouchMoveScroll,{passive:!1}),document.removeEventListener("keydown",preventArrowKeyScroll,{passive:!1})}function transitionToNextPage(){startButton&&(startButton.style.display="none"),startText&&(startText.style.display="none"),startImage&&(startImage.style.display="none"),additionalText&&(additionalText.style.display="none");const leftArrowContainer=document.getElementById("leftArrowContainer"),rightArrowContainer=document.getElementById("rightArrowContainer");leftArrowContainer&&rightArrowContainer&&(leftArrowContainer.style.display="block",rightArrowContainer.style.display="block"),fetchAndDisplayRandomBookmark()}function scaleButtonEffect(button){button.classList.add("scaled-down"),setTimeout(()=>{button.classList.remove("scaled-down")},600)}